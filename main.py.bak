# coding:utf-8
import variable
from Actor import *
from ActorController import *
from world import *

l = stage.getImageList("chars.bmp")
clock = pygame.time.Clock()


class mapController():
    def __init__(self):
        self.field = []
        self.char = []
        self.item = []


currentMap = mapController()

accn = ActorController()


def main():
    worldInit(10)

    p.act_state = WAIT_KEY
    actors.append(p)

    for i in xrange(100):
        e = Enemy(
            [getNewId(), "ene", random.randint(1, 90), "None", "Gob", 100, 100, 50, 50, 5, ["Normal"]],
            [random.randint(0, 255), random.randint(0, 255)])
        e.act_state = WAIT
        actors.append(e)

    while True:
        stage.prepareRedraw()
        # print cutWorldMapToDisplay(worldMap, p.x,p.y,mapX,mapY)

        stage.drawMap(cutWorldMapToDisplay(worldMap, p.x, p.y, mapX, mapY), source="field")
        stage.drawMap(cutWorldMapToDisplay(char, p.x, p.y, mapX, mapY), "char")
        accn.action()
        #stage.drawMap(cutWorldMapToDisplay(worldMap, p.x, p.y, mapX, mapY), source="field")
        #stage.drawMap(cutWorldMapToDisplay(char, p.x, p.y, mapX, mapY), "char")
        clock.tick(60)


if __name__ == '__main__':
    main()
